import { BaseDatabase } from 'adminjs';
import { Resource } from './Resource.js';
export class Database extends BaseDatabase {
    orm;
    constructor(orm) {
        super(orm);
        this.orm = orm;
        this.orm = orm;
    }
    resources() {
        const metadata = this.orm.getMetadata();
        if (!metadata)
            return [];
        metadata.decorate(this.orm.em);
        return Object.values(metadata.getAll()).reduce((memo, meta) => {
            const resource = new Resource({
                model: meta.class,
                orm: this.orm,
            });
            memo.push(resource);
            return memo;
        }, []);
    }
    static isAdapterFor(orm) {
        return !!orm.isConnected?.() && !!orm.getMetadata?.();
    }
}
//# sourceMappingURL=Database.js.map